<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理者權限管理 - 機構端管理系統</title>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 自訂樣式 -->
    <link rel="stylesheet" href="css/admin.css">
    <style>
        .permission-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 999px;
            font-size: 12px;
            background: rgba(52, 152, 219, 0.12);
            color: var(--info-color);
            font-weight: 600;
        }

        .permission-chip.success {
            background: rgba(39, 174, 96, 0.12);
            color: var(--success-color);
        }

        .permission-chip.warning {
            background: rgba(243, 156, 18, 0.12);
            color: var(--warning-color);
        }

        .permission-chip.danger {
            background: rgba(231, 76, 60, 0.12);
            color: var(--danger-color);
        }

        .permission-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .role-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .role-card {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            background: #fff;
        }

        .role-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .role-name {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .role-desc {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .role-actions {
            display: flex;
            gap: 8px;
        }

        .permission-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .permission-item {
            padding: 14px;
            border-radius: 10px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .permission-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .permission-title {
            font-size: 14px;
            font-weight: 600;
        }

        .permission-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        @media (max-width: 1200px) {
            .role-grid,
            .permission-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- 側邊欄 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div>
                    <div class="sidebar-title">智慧照護平台</div>
                    <div class="sidebar-subtitle">機構端管理系統</div>
                </div>
            </div>
            
            <nav class="sidebar-menu">
                <div class="menu-section">
                    <div class="menu-section-title">主要功能</div>
                    
                    <a href="index.html" class="menu-item">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>儀表板</span>
                    </a>
                    
                    <div class="menu-item" data-submenu="member-submenu">
                        <i class="fas fa-users"></i>
                        <span>個案會員管理</span>
                        <i class="fas fa-chevron-right arrow"></i>
                    </div>
                    <div class="submenu" id="member-submenu">
                        <a href="members.html" class="menu-item">
                            <span>個案列表</span>
                        </a>
                        <a href="member-binding.html" class="menu-item">
                            <span>綁定設定</span>
                        </a>
                    </div>
                    
                    <a href="orders.html" class="menu-item">
                        <i class="fas fa-shopping-cart"></i>
                        <span>訂購清單查詢</span>
                    </a>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">機構功能</div>
                    
                    <a href="organization.html" class="menu-item">
                        <i class="fas fa-building"></i>
                        <span>機構資訊管理</span>
                    </a>
                    
                    <a href="admins.html" class="menu-item active">
                        <i class="fas fa-user-shield"></i>
                        <span>管理者權限管理</span>
                    </a>
                    
                    <a href="announcements.html" class="menu-item">
                        <i class="fas fa-bullhorn"></i>
                        <span>機構公告管理</span>
                    </a>
                    
                    <a href="chat.html" class="menu-item">
                        <i class="fas fa-comments"></i>
                        <span>個案關懷通訊</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- 主要內容區 -->
        <div class="main-content">
            <!-- 頂部導覽列 -->
            <header class="top-navbar">
                <div class="navbar-left">
                    <i class="fas fa-bars menu-toggle"></i>
                    <div class="breadcrumb">
                        <a href="index.html">首頁</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>管理者權限管理</span>
                    </div>
                </div>
                
                <div class="navbar-right">
                    <div class="user-dropdown">
                        <div class="user-avatar">陳</div>
                        <div class="user-info">
                            <div class="user-name">陳小華</div>
                            <div class="user-role">機構管理員</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 頁面內容 -->
            <div class="page-content">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">管理者權限管理</h1>
                        <p class="page-subtitle">管理管理者帳號、角色權限與操作範圍。</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-users-cog"></i> 管理者列表</h3>
                        <div class="filter-left">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="搜尋姓名或帳號">
                            </div>
                            <button class="btn btn-primary">
                                <i class="fas fa-user-plus"></i> 新增管理者
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>姓名</th>
                                        <th>帳號</th>
                                        <th>角色</th>
                                        <th>狀態</th>
                                        <th>最後登入</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>陳小華</td>
                                        <td>admin@sunnycare.com</td>
                                        <td>全域管理員</td>
                                        <td><span class="status-badge active">啟用</span></td>
                                        <td>2026/02/02 09:20</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-sm btn-outline" onclick="openAdminEdit('陳小華','admin@sunnycare.com','全域管理員','active')"><i class="fas fa-pen"></i></button>
                                                <button class="btn btn-sm btn-danger"><i class="fas fa-ban"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>林小美</td>
                                        <td>lin@sunnycare.com</td>
                                        <td>營運主管</td>
                                        <td><span class="status-badge active">啟用</span></td>
                                        <td>2026/02/01 18:40</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-sm btn-outline" onclick="openAdminEdit('林小美','lin@sunnycare.com','營運主管','active')"><i class="fas fa-pen"></i></button>
                                                <button class="btn btn-sm btn-danger"><i class="fas fa-ban"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>王大明</td>
                                        <td>wang@sunnycare.com</td>
                                        <td>個案管理</td>
                                        <td><span class="status-badge active">啟用</span></td>
                                        <td>2026/02/01 09:12</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-sm btn-outline" onclick="openAdminEdit('王大明','wang@sunnycare.com','個案管理','active')"><i class="fas fa-pen"></i></button>
                                                <button class="btn btn-sm btn-danger"><i class="fas fa-ban"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>張小芸</td>
                                        <td>chang@sunnycare.com</td>
                                        <td>客服人員</td>
                                        <td><span class="status-badge pending">待啟用</span></td>
                                        <td>尚未登入</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="btn btn-sm btn-outline" onclick="openAdminEdit('張小芸','chang@sunnycare.com','客服人員','pending')"><i class="fas fa-envelope"></i></button>
                                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-layer-group"></i> 角色權限設定</h3>
                        <button class="btn btn-sm btn-outline"><i class="fas fa-plus"></i> 新增角色</button>
                    </div>
                    <div class="card-body">
                        <div class="role-grid" style="grid-template-columns: 1fr;">
                            <div class="role-card">
                                <div class="role-header">
                                    <div class="role-name">全域管理員</div>
                                    <span class="status-badge active">全權限</span>
                                </div>
                                <div class="role-desc">可管理所有功能與帳號，包含權限設定與機構資訊。</div>
                                <div class="role-actions" style="margin-top: 14px;">
                                    <button class="btn btn-sm btn-outline" onclick="openRoleEdit('全域管理員')"><i class="fas fa-pen"></i> 編輯</button>
                                    <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> 停用</button>
                                </div>
                            </div>
                            <div class="role-card">
                                <div class="role-header">
                                    <div class="role-name">營運主管</div>
                                    <span class="status-badge processing">營運權限</span>
                                </div>
                                <div class="role-desc">可管理訂單、報表與公告，無法修改系統權限。</div>
                                <div class="role-actions" style="margin-top: 14px;">
                                    <button class="btn btn-sm btn-outline" onclick="openRoleEdit('營運主管')"><i class="fas fa-pen"></i> 編輯</button>
                                    <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> 停用</button>
                                </div>
                            </div>
                            <div class="role-card">
                                <div class="role-header">
                                    <div class="role-name">個案管理</div>
                                    <span class="status-badge active">服務中</span>
                                </div>
                                <div class="role-desc">負責個案資料管理與綁定設定。</div>
                                <div class="role-actions" style="margin-top: 14px;">
                                    <button class="btn btn-sm btn-outline" onclick="openRoleEdit('個案管理')"><i class="fas fa-pen"></i> 編輯</button>
                                    <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> 停用</button>
                                </div>
                            </div>
                            <div class="role-card">
                                <div class="role-header">
                                    <div class="role-name">客服人員</div>
                                    <span class="status-badge pending">只讀</span>
                                </div>
                                <div class="role-desc">可檢視訂單與通訊內容，無法修改資料。</div>
                                <div class="role-actions" style="margin-top: 14px;">
                                    <button class="btn btn-sm btn-outline" onclick="openRoleEdit('客服人員')"><i class="fas fa-pen"></i> 編輯</button>
                                    <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> 停用</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-shield-check"></i> 權限模組</h3>
                    </div>
                    <div class="card-body">
                        <div class="permission-grid">
                            <div class="permission-item">
                                <div class="permission-info">
                                    <div class="permission-title">個案會員管理</div>
                                    <div class="permission-desc">個案列表與綁定設定權限</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="permission-item">
                                <div class="permission-info">
                                    <div class="permission-title">訂購清單管理</div>
                                    <div class="permission-desc">訂單查詢、狀態追蹤</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="permission-item">
                                <div class="permission-info">
                                    <div class="permission-title">機構資訊管理</div>
                                    <div class="permission-desc">修改機構資訊與營業設定</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="permission-item">
                                <div class="permission-info">
                                    <div class="permission-title">公告與訊息</div>
                                    <div class="permission-desc">公告管理、關懷訊息</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="permission-item">
                                <div class="permission-info">
                                    <div class="permission-title">權限設定</div>
                                    <div class="permission-desc">新增與調整角色權限</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div style="margin-top: 18px; text-align: right;">
                            <button class="btn btn-primary"><i class="fas fa-save"></i> 儲存權限</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="adminEditModal" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>管理者編輯</h3>
                <i class="fas fa-times" onclick="closeAdminEdit()"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>姓名</label>
                    <input id="editAdminName" class="form-control" type="text" value="">
                </div>
                <div class="form-group">
                    <label>帳號</label>
                    <input id="editAdminEmail" class="form-control" type="email" value="">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>角色</label>
                        <select id="editAdminRole" class="form-control">
                            <option>全域管理員</option>
                            <option>營運主管</option>
                            <option>個案管理</option>
                            <option>客服人員</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>狀態</label>
                        <select id="editAdminStatus" class="form-control">
                            <option value="active">啟用</option>
                            <option value="pending">待啟用</option>
                            <option value="inactive">停用</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>權限範圍</label>
                    <div class="settings-grid" style="grid-template-columns: 1fr;">
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">全域權限</div>
                                <div class="setting-desc">可管理所有功能與帳號</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="permAll">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">訂單管理</div>
                                <div class="setting-desc">訂單管理與查詢</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="permOrders" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">個案與綁定</div>
                                <div class="setting-desc">個案列表、綁定設定</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="permMembers" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">公告與通訊</div>
                                <div class="setting-desc">機構公告、關懷通訊</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="permMessages">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">機構資訊</div>
                                <div class="setting-desc">機構資訊與營業設定</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="permOrg">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-outline" onclick="closeAdminEdit()">取消</button>
                    <button class="btn btn-primary" onclick="saveAdminEdit()">儲存</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="roleEditModal" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>角色權限設定</h3>
                <i class="fas fa-times" onclick="closeRoleEdit()"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>角色名稱</label>
                    <input id="roleNameInput" class="form-control" type="text" value="">
                </div>
                <div class="form-group">
                    <label>權限設定</label>
                    <div class="settings-grid" style="grid-template-columns: 1fr;">
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">個案會員管理</div>
                                <div class="setting-desc">個案列表、綁定、審核權限</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">訂購清單管理</div>
                                <div class="setting-desc">訂單查詢、狀態追蹤</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">機構資訊管理</div>
                                <div class="setting-desc">修改機構資訊與營業設定</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">公告與訊息</div>
                                <div class="setting-desc">公告管理、關懷訊息</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-title">權限設定</div>
                                <div class="setting-desc">新增與調整角色權限</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-outline" onclick="closeRoleEdit()">取消</button>
                    <button class="btn btn-primary" onclick="saveRoleEdit()">儲存</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
    <script>
        function openAdminEdit(name, email, role, status) {
            const modal = document.getElementById('adminEditModal');
            document.getElementById('editAdminName').value = name || '';
            document.getElementById('editAdminEmail').value = email || '';
            document.getElementById('editAdminRole').value = role || '客服人員';
            document.getElementById('editAdminStatus').value = status || 'active';
            modal.style.display = 'flex';
        }

        function closeAdminEdit() {
            document.getElementById('adminEditModal').style.display = 'none';
        }

        function saveAdminEdit() {
            closeAdminEdit();
        }

        function openRoleEdit(roleName) {
            document.getElementById('roleNameInput').value = roleName || '';
            document.getElementById('roleEditModal').style.display = 'flex';
        }

        function closeRoleEdit() {
            document.getElementById('roleEditModal').style.display = 'none';
        }

        function saveRoleEdit() {
            closeRoleEdit();
        }
    </script>
</body>
</html>
